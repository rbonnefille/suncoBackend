import{P as v}from"./PulseLoader-AWdKkORt.js";import{_ as u,V as c}from"./VLabel-BY0Jjxm_.js";import{V as b}from"./VButton-BV5m6Noj.js";import{a8 as h,j as n,a as y,b as V,o as B,d,g as t,C as N}from"./index-DJ2DGYK_.js";import{b as m}from"./route-block-B_A1xBdJ.js";const O={class:"mb-4 container"},_={class:"mt-2 flex align-items-center gap-2"},w={__name:"index",setup(C){const l=h(),r=n(!1),o=n(""),a=n(""),p=n(""),f=y(()=>!o.value||!a.value),g=async()=>{try{r.value=!0;const e=await(await fetch("/notifications/sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({destinationId:o.value.match(/^\+.*$/)?o.value:`+${o.value}`,message:a.value})})).json();if(!e.notification)throw l.warning(e||e.error,{position:"bottom-center",timeout:1e4,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!0,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1}),new Error(e.error);l.success(`Notification sent successfully!: ${e?.notification?._id}`,{position:"bottom-center",timeout:1e4,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!0,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})}catch(s){p.value=s,console.error(s)}finally{r.value=!1}};return(s,e)=>(B(),V("div",O,[e[2]||(e[2]=d("h2",{class:"mt-3"},"Send a proactive SMS",-1)),t(u,{id:"phoneNumber",name:"Phone Number"}),t(c,{id:"phoneNumber",type:"input",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=i=>o.value=i),placeholder:"Enter a phone number"},null,8,["modelValue"]),t(u,{id:"message",name:"Message",class:"mt-2"}),t(c,{id:"message",type:"input",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value=i),placeholder:"Enter a message"},null,8,["modelValue"]),d("div",_,[t(b,{text:"Send Notification",type:"submit",class:N(["widgetBtn border-round-xl",{"opacity-50":!o.value||!a.value}]),onClick:g,disabled:f.value},null,8,["disabled","class"]),t(v,{loading:r.value,color:"#D1F470",size:"10px"},null,8,["loading"])])]))}};typeof m=="function"&&m(w);export{w as default};
