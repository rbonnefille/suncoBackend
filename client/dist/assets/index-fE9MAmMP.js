import{j as r,a as J,b as c,o as i,d as a,ai as N,F as v,e as j,g as n,i as k,aa as B,h as R,t as w}from"./index-DJ2DGYK_.js";import{_ as K,V as b}from"./VLabel-BY0Jjxm_.js";import{V as u}from"./VButton-BV5m6Noj.js";import{P as L}from"./PulseLoader-AWdKkORt.js";import{b as V}from"./route-block-B_A1xBdJ.js";const P={class:"container mt-5"},D={id:"suncoData",class:"flex flex-column gap-3"},I={class:"flex flex-wrap justify-content-center gap-3"},O={class:"flex justify-content-center mt-3 gap-2"},$={class:"flex justify-content-center mt-5"},q={class:"flex flex-column"},T={class:"flex mb-4 gap-2"},A={class:"text-center"},H=["href"],M={key:0},Q={__name:"index",setup(Z){const m=r(!1),h=r(""),p=r([]),d=r(""),_=async()=>{m.value=!0,C();const s=`https://z3nsuncoswitchboard.zendesk.com/api/v2/help_center/articles/search.json?query=${encodeURIComponent(h.value)}`;try{const e=await fetch(s);if(e.ok){const l=await e.json();z(l)}else throw new Error("Request error")}catch(e){U(e)}finally{m.value=!1}},z=o=>{p.value=o.results,o.results.length===0&&(d.value="No results")},U=o=>{o.value=o},C=()=>{p.value=[],d.value=""},t=r({external_id:"john-john",name:"john-john",email:"john-john@test.com",role:"agent"}),S=()=>{t.value.external_id="john-user",t.value.name="John User",t.value.email="john-user@example.com",t.value.role="end_user",f()},E=[{id:"external_id",name:"User external_id",type:"text",placeholder:"jane-doe"},{id:"name",name:"User name",type:"text",placeholder:"Jane Doe"},{id:"email",name:"Email address",type:"email",placeholder:"jane-doe@example.com"},{id:"role",name:"User role",type:"text",placeholder:"admin"}],F=J(()=>!t.value.external_id||!t.value.name||!t.value.email||!t.value.role),f=async()=>{console.log(t.value);const{external_id:o,name:s,email:e,role:l}=t.value;if(o&&s&&e&&l)try{const g=await(await fetch("/zendesk/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:e,external_id:o,role:l})})).json();console.log("Success:",g),x(),window.location.href=`https://z3nsuncoswitchboard.zendesk.com/access/jwt?jwt=${g.token}`}catch(y){console.error("Error:",y)}},x=()=>{t.value={external_id:null,name:null,email:null,role:null}};return(o,s)=>(i(),c(v,null,[a("div",P,[a("form",D,[a("div",I,[(i(),c(v,null,j(E,e=>a("div",{key:e.id,class:"flex flex-column"},[n(K,{id:e.id,name:e.name},null,8,["id","name"]),n(b,{id:e.id,modelValue:t.value[e.id],"onUpdate:modelValue":l=>t.value[e.id]=l,name:e.name,type:e.type,placeholder:e.placeholder},null,8,["id","modelValue","onUpdate:modelValue","name","type","placeholder"])])),64))]),a("div",O,[n(u,{text:"Submit",type:"submit",disabled:F.value,onClick:k(f,["prevent"])},null,8,["disabled"]),n(u,{text:"Log as John End User",type:"submit",onClick:k(S,["prevent"])}),n(u,{text:"Cancel",type:"cancel",onClick:x})])]),s[1]||(s[1]=N('<div class="flex justify-content-center mt-5"><div class="w-4"><h4>Other Zendesk links</h4><div class="list-group"><a class="routes" href="https://z3nsuncoswitchboard.zendesk.com/agent">Agent login portal</a><a class="routes" href="https://z3nsuncoswitchboard.zendesk.com/hc">End-user login portal</a></div></div></div>',1))]),a("div",$,[a("div",q,[s[2]||(s[2]=a("h4",null,"Search Help Center articles",-1)),a("div",T,[n(b,{id:"searchKb",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),name:"search",type:"text",placeholder:"Search",onKeyup:B(_,["enter"])},null,8,["modelValue"]),n(u,{type:"submit",text:"Search",onClick:_})]),a("div",A,[n(L,{loading:m.value,color:"#355E34",size:"20px"},null,8,["loading"])]),a("ul",null,[(i(!0),c(v,null,j(p.value,e=>(i(),c("li",{class:"mt-1",key:e.id},[a("a",{href:e.html_url,target:"_blank"},w(e.title),9,H)]))),128)),d.value?(i(),c("p",M,w(d.value),1)):R("",!0)])])])],64))}};typeof V=="function"&&V(Q);export{Q as default};
